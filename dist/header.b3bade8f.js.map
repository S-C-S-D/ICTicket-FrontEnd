{"version":3,"sources":["../src/components/header.js"],"names":["$","document","ready","accessToken","localStorage","getItem","refreshToken","html","focus","parent","addClass","blur","removeClass","on","window","location","href","console","log","confirm","removeItem","alert","ajax","url","concat","SERVER_URL","type","xhrFields","withCredentials","crossDomain","headers","beforeSend","xhr","setRequestHeader","success","likeResponseDto","error","jqXHR","commentResponse","responseJSON","commentResponseText","responseText","message"],"mappings":";AAAAA,EAAEC,UAAUC,MAAM,WACd,IAAMC,EAAcC,aAAaC,QAAQ,iBACnCC,EAAeF,aAAaC,QAAQ,gBAEtCF,GAAeG,EACfN,EAAE,gBAAgBO,KASjB,qWAEDP,EAAE,gBAAgBO,KASjB,mVAILP,EAAE,SAASQ,MAAM,WACbR,EAAE,MAAMS,SAASC,SAAS,aAC3BC,KAAK,WACJX,EAAE,MAAMS,SAASG,YAAY,aAIjCZ,EAAE,UAAUa,GAAG,QAAS,WAEhBC,OAAOC,SAASC,KAAe,WAOvChB,EAAE,WAAWa,GAAG,QAAS,WACrBI,QAAQC,IAAI,WACZJ,OAAOC,SAASC,KAAO,YAG3BhB,EAAE,WAAWa,GAAG,QAAS,WACjBV,GAAeG,EACXa,QAAQ,kBACRf,aAAagB,WAAW,iBACxBhB,aAAagB,WAAW,gBACxBN,OAAOC,SAASC,KAAO,SAG3BK,MAAM,gBAIdrB,EAAE,WAAWa,GAAG,QAAS,WACrBb,EAAEsB,KAAK,CACHC,IAAGC,GAAAA,OAAKV,OAAOW,WAA0B,kBACzCC,KAAM,MACNC,UAAW,CACPC,iBAAiB,GAErBC,aAAa,EACbC,QAAS,CACL,cAAiB,UAAY3B,GAEjC4B,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,gBAAiB9B,IAE1C+B,QAAS,SAAUC,GACflB,QAAQC,IAAIiB,GACZrB,OAAOC,SAASC,KAAO,WAE3BoB,MAAO,SAAUC,GACb,IAAMC,EAAkBD,EAAME,aACxBC,EAAsBH,EAAMI,aAEX,MAAnBH,GACAjB,MAAMiB,EAAgBI,SACtB5B,OAAOC,SAASC,KAAO,SACvBZ,aAAagB,WAAW,iBACxBhB,aAAagB,WAAW,iBAExBC,MAAMmB","file":"header.b3bade8f.js","sourceRoot":"../public","sourcesContent":["$(document).ready(function () {\n    const accessToken = localStorage.getItem('Authorization');\n    const refreshToken = localStorage.getItem('RefreshToken');\n\n    if (accessToken && refreshToken) {\n        $('#loginOption').html(`\n            <div class=\"text-wrapper login-success\">\n                <div class=\"logout\">\n                    <span id=\"logOut\" class=\"fs-15 medium\">로그아웃</span>\n                </div>\n                <div class=\"mypage\">\n                    <span id=\"myPage\" class=\"fs-15 medium\">마이페이지</span>\n                </div>\n            </div>\n        `);\n    } else {\n        $('#loginOption').html(`\n            <div class=\"text-wrapper\">\n                <div class=\"login\">\n                    <span id=\"login\" class=\"fs-15 medium\">로그인</span>\n                </div>\n                <div class=\"signup\">\n                    <span id=\"signUp\" class=\"fs-15 medium\">회원가입</span>\n                </div>\n            </div>\n        `);\n    }\n\n\n    $('input').focus(function () {\n        $(this).parent().addClass('focused');\n    }).blur(function () {\n        $(this).parent().removeClass('focused');\n    });\n\n\n    $('#login').on('click', function() {\n        if (true) {\n            window.location.href = `/login`;\n        } else {\n            window.location.href = `/home`\n        }\n    });\n\n\n    $('#signUp').on('click', function() {\n        console.log('회원가입 클릭');\n        window.location.href = '/signup';\n    });\n\n    $('#logOut').on('click', function() {\n        if (accessToken && refreshToken) {\n            if (confirm(\"로그아웃 하시겠습니까?\")) {\n                localStorage.removeItem('Authorization');\n                localStorage.removeItem('RefreshToken');\n                window.location.href = '/home'; // 페이지 이동\n            }\n        } else {\n            alert(\"잘못된 접근입니다.\");\n        }\n    });\n\n    $('#myPage').on('click', function() {\n        $.ajax({\n            url: `${window.SERVER_URL}/users/profile`,\n            type: 'GET',\n            xhrFields: {\n                withCredentials: true // 필요 시 추가\n            },\n            crossDomain: true,\n            headers: {\n                'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n            },\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n            },\n            success: function (likeResponseDto) {\n                console.log(likeResponseDto)\n                window.location.href = '/mypage';\n            },\n            error: function (jqXHR) {\n                const commentResponse = jqXHR.responseJSON;\n                const commentResponseText = jqXHR.responseText;\n    \n                if (commentResponse != null) {\n                    alert(commentResponse.message);\n                    window.location.href = '/login';\n                    localStorage.removeItem('Authorization');\n                    localStorage.removeItem('RefreshToken');\n                } else {\n                    alert(commentResponseText)\n                }\n    \n            }\n        });\n    });\n});"]}