parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ox5k":[function(require,module,exports) {
$(document).ready(function(){var n=localStorage.getItem("Authorization");$.ajax({url:"http://localhost:8080/users/profile",type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{Authorization:"Bearer "+n},beforeSend:function(a){a.setRequestHeader("Authorization",n)},success:function(a){console.log(a);var e=a.data,s=$(".user-profile");s.empty();var r='\n                <div class="flex-group">\n                <img src="https://ifh.cc/g/7kQYpA.png">\n                    <div class="user-info-wrap">\n                        <span class="user-nickname">'.concat(e.nickname,'</span>\n                        <span class="user-email">').concat(e.email,'</span>\n                        <span class="user-address">').concat(e.address,'</span>\n                        <span class="user-phonenumber">').concat(e.phoneNumber,'</span>\n                    </div>\n                </div>\n                <div class="order-count-wrap">\n                    <span class="order-count">').concat(e.orderCount,'</span>\n                    <span class="order-text">예매내역</span>\n                </div>\n            ');s.append(r),function a(e){$.ajax({url:"http://localhost:8080/users/".concat(e,"/orders"),type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{Authorization:"Bearer "+n},beforeSend:function(a){a.setRequestHeader("Authorization",n)},success:function(s){console.log(s);var r=s.data,t=$(".row-table-wrapper");t.empty(),r.forEach(function(n,a){var e="".concat(n.sessionDate," ").concat(n.sessionTime.slice(0,5)),s='\n                        <div class="row-wrapper">\n                            <div class="row date">'.concat(n.orderDate,'</div>\n                            <a href="/performances/').concat(n.performanceId,'">\n                            <div class="row title" data-id="">\n                                <img class="performance-image" src="').concat(n.imageUrl,'">\n                                <div class="info-wrapper">\n                                    <span class="performance-genre">').concat(function(n){switch(n){case"MUSICAL":return"뮤지컬";case"CONCERT":return"콘서트";case"FESTIVAL":return"페스티벌";case"SPORTS":return"스포츠";case"EXHIBITION":return"전시회";case"CLASSIC":return"클래식/무용";case"RANKING":return"랭크";default:return"공연"}}(n.genreType),'</span>\n                                    <span class="performance-title">').concat(n.title,'</span>\n                                    <span class="performance-date">').concat(n.startAt+" ~ "+n.endAt,'</span>\n                                    <span class="performance-venue">').concat(n.address,'</span>\n                                </div>\n                            </div>\n                            </a>\n                            <div class="row info">\n                                <div class="info-wrapper">\n                                    <div class="info-wrap">\n                                        <span class="info-title">예약번호</span>\n                                        <span class="info-detail view-date">').concat(n.orderNumber,'</span>\n                                    </div>\n                                    <div class="info-wrap">\n                                        <span class="info-title">관람일</span>\n                                        <span class="info-detail">').concat(e,'</span>\n                                    </div>\n                                    <div class="info-wrap">\n                                        <span class="info-title">매수</span>\n                                        <span class="info-detail">').concat(n.ticketCount,'</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="row reserve">\n                                <div class="status-wrap">\n                                    <span class="order-status">').concat(function(n){switch(n){case"SUCCESS":return"결제완료";case"CANCEL":return"결제취소";default:return"상태없음"}}(n.orderStatus),'</span>\n                                    <div class="cancelBtn" data-id="').concat(n.orderId,'">\n                                        취소하기\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    ');t.append(s),"CANCEL"==n.orderStatus&&t.find('.cancelBtn[data-id="'.concat(n.orderId,'"]')).hide()}),$(".cancelBtn").click(function(){var s=$(this).data("id"),r=confirm("예매를 취소하시겠습니까?");r&&$.ajax({url:"http://localhost:8080/users/orders/".concat(s),type:"PATCH",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{Authorization:"Bearer "+n},beforeSend:function(a){a.setRequestHeader("Authorization",n)},success:function(n){console.log(n),alert("예매가 취소되었습니다."),a(e)},error:function(n){var a=n.responseJSON,e=n.responseText;null!=a?alert(a.message):alert(e)}})})},error:function(n){var a=n.responseJSON,e=n.responseText;null!=a?alert(a.message):alert(e)}})}(e.id)},error:function(n){var a=n.responseJSON,e=n.responseText;null!=a?alert(a.message):alert(e)}})});
},{}]},{},["ox5k"], null)
//# sourceMappingURL=/mypage.31694547.js.map