{"version":3,"sources":["../src/components/header.js"],"names":["$","document","ready","accessToken","localStorage","getItem","refreshToken","html","focus","parent","addClass","blur","removeClass","on","window","location","href","console","log","confirm","removeItem","alert","ajax","url","concat","SERVER_URL","type","xhrFields","withCredentials","crossDomain","headers","beforeSend","xhr","setRequestHeader","success","likeResponseDto","error","jqXHR","commentResponse","responseJSON","commentResponseText","responseText","message"],"mappings":"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","file":"header.cb6abba2.js","sourceRoot":"../public","sourcesContent":["$(document).ready(function () {\n    const accessToken = localStorage.getItem('Authorization');\n    const refreshToken = localStorage.getItem('RefreshToken');\n\n    if (accessToken && refreshToken) {\n        $('#loginOption').html(`\n            <div class=\"text-wrapper login-success\">\n                <div class=\"logout\">\n                    <span id=\"logOut\" class=\"fs-15 medium\">로그아웃</span>\n                </div>\n                <div class=\"mypage\">\n                    <span id=\"myPage\" class=\"fs-15 medium\">마이페이지</span>\n                </div>\n            </div>\n        `);\n    } else {\n        $('#loginOption').html(`\n            <div class=\"text-wrapper\">\n                <div class=\"login\">\n                    <span id=\"login\" class=\"fs-15 medium\">로그인</span>\n                </div>\n                <div class=\"signup\">\n                    <span id=\"signUp\" class=\"fs-15 medium\">회원가입</span>\n                </div>\n            </div>\n        `);\n    }\n\n\n    $('input').focus(function () {\n        $(this).parent().addClass('focused');\n    }).blur(function () {\n        $(this).parent().removeClass('focused');\n    });\n\n\n    $('#login').on('click', function() {\n        if (true) {\n            window.location.href = `/login`;\n        } else {\n            window.location.href = `/home`\n        }\n    });\n\n\n    $('#signUp').on('click', function() {\n        console.log('회원가입 클릭');\n        window.location.href = '/signup';\n    });\n\n    $('#logOut').on('click', function() {\n        if (accessToken && refreshToken) {\n            if (confirm(\"로그아웃 하시겠습니까?\")) {\n                localStorage.removeItem('Authorization');\n                localStorage.removeItem('RefreshToken');\n                window.location.href = '/home'; // 페이지 이동\n            }\n        } else {\n            alert(\"잘못된 접근입니다.\");\n        }\n    });\n\n    $('#myPage').on('click', function() {\n        $.ajax({\n            url: `${window.SERVER_URL}/users/profile`,\n            type: 'GET',\n            xhrFields: {\n                withCredentials: true // 필요 시 추가\n            },\n            crossDomain: true,\n            headers: {\n                'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n            },\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n            },\n            success: function (likeResponseDto) {\n                console.log(likeResponseDto)\n                window.location.href = '/mypage';\n            },\n            error: function (jqXHR) {\n                const commentResponse = jqXHR.responseJSON;\n                const commentResponseText = jqXHR.responseText;\n    \n                if (commentResponse != null) {\n                    alert(commentResponse.message);\n                    window.location.href = '/login';\n                    localStorage.removeItem('Authorization');\n                    localStorage.removeItem('RefreshToken');\n                } else {\n                    alert(commentResponseText)\n                }\n    \n            }\n        });\n    });\n});"]}