{"version":3,"sources":["../src/components/session.js"],"names":["$","document","ready","pathParts","window","location","pathname","split","performanceId","indexOf","accessToken","localStorage","getItem","selectedSeats","updateSeatConfirmBtn","length","console","log","addClass","css","removeClass","modifiedAt","getFormattedDate","date","Date","year","getFullYear","month","getMonth","slice","day","getDate","hours","getHours","minutes","getMinutes","concat","on","hide","updateSeatCountMessage","text","updateSeatTextMargin","ajax","url","SERVER_URL","type","contentType","xhrFields","withCredentials","crossDomain","headers","beforeSend","xhr","setRequestHeader","success","boardResponse","sessions","data","dates","forEach","session","push","formatDate","dateString","options","weekday","toLocaleDateString","formatTime","timeString","_timeString$split$map","map","Number","_timeString$split$map2","_slicedToArray","hour","minute","period","adjustedHour","String","padStart","formattedDate","append","selectedDate","attr","selectedSessions","empty","formattedTime","time","id","name","sessionId","seatCount","seatCountData","restSeatCount","totalSeatCount","error","jqXHR","commentResponse","responseJSON","commentResponseText","responseText","alert","message","first","click","hasClass","event","preventDefault","stopPropagation","performanceTitle","dateInfo","timeInfo","seatList","show","vipGridDiv","rGridDiv","sGridDiv","aGridDiv","seatLists","seat","index","seatGrade","notReserved","price","paying","paymentCompleted","seatStatus","seatListWrapperDiv","seatId","seatIndex","seatPrice","find","remove","filter","seatData","grade","selectedSeatElement","off","requestData","seatIdList","JSON","stringify","seatSelectResponseDto","totalPrice","each","parseInt","currentText","discountedTotalPrice","discountRate","toFixed","formattedDiscountTotalPrice","toLocaleString","requestDtoData","href"],"mappings":"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","file":"session.3ad098d1.js","sourceRoot":"../public","sourcesContent":["$(document).ready(function () {\n    // URL에서 performanceId 추출\n    const pathParts = window.location.pathname.split('/');\n    const performanceId = pathParts[pathParts.indexOf('performances') + 1];\n    const accessToken = localStorage.getItem('Authorization');\n    let selectedSeats = [];\n\n\n    function updateSeatConfirmBtn() {\n        if (selectedSeats.length === 0) {\n            console.log(\"Test\")\n            $('#seatConfirmBtn').addClass('disabled').css('pointer-events', 'none');\n    \n        } else {\n            $('#seatConfirmBtn').removeClass('disabled').css('pointer-events', 'auto')\n        }\n    }\n    updateSeatConfirmBtn();\n\n    \n    let modifiedAt = '';\n\n    function getFormattedDate() {\n        const date = new Date();\n        const year = date.getFullYear();\n        const month = ('0' + (date.getMonth() + 1)).slice(-2);\n        const day = ('0' + date.getDate()).slice(-2);\n        const hours = ('0' + date.getHours()).slice(-2);\n        const minutes = ('0' + date.getMinutes()).slice(-2);\n\n        return `${year}-${month}-${day}-${hours}:${minutes}`;\n    }\n\n    $(\".container > .cover\").on('click', function () {\n        $(\".container > .cover\").hide();\n        $(\".popup\").hide();\n        $(\".popup-payment\").hide();\n        selectedSeats = [];\n    });\n\n    // 초기 상태 메시지\n    function updateSeatCountMessage() {\n        if (!$('.date.active').length || !$('.session.active').length) {\n            $(\".seat-text\").text(\"날짜와 시간을 선택해 주세요\");\n            $(\".seat-count\").text(\"\");\n            $(\".reserveBtn\").addClass(\"disabled\")\n        }\n    }\n\n    // 두 요소가 모두 활성화되었는지 확인하여 seat-text의 margin-right를 업데이트하는 함수\n    function updateSeatTextMargin() {\n        if ($('.date.active').length && $('.session.active').length) {\n            $(\".seat-text\").css(\"margin-right\", \"50px\");\n            $(\".reserveBtn\").removeClass(\"disabled\")\n        } else {\n            $(\".seat-text\").css(\"margin-right\", \"\");\n        }\n    }\n\n    // [세션 조회]\n    $.ajax({\n        url: `${window.SERVER_URL}/performances/${performanceId}/sessions`,\n        type: 'GET',\n        contentType: 'application/json',\n        xhrFields: {\n            withCredentials: true // 필요 시 추가\n        },\n        crossDomain: true,\n        headers: {\n            'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n        },\n        beforeSend: function (xhr) {\n            xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n        },\n        success: function (boardResponse) {\n            console.log(boardResponse);\n\n            const sessions = boardResponse.data;\n            const dates = {};\n\n            // 날짜별로 세션을 그룹화\n            sessions.forEach(session => {\n                if (!dates[session.date]) {\n                    dates[session.date] = [];\n                }\n                dates[session.date].push(session);\n            });\n\n            // 날짜를 \"2024년 08월 07일 수요일\" 형식으로 변환하는 함수\n            function formatDate(dateString) {\n                const date = new Date(dateString);\n                const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };\n                return date.toLocaleDateString('ko-KR', options);\n            }\n\n            // 시간을 \"오후 12시 00분\" 형식으로 변환하는 함수\n            function formatTime(timeString) {\n                const [hour, minute] = timeString.split(':').map(Number);\n                const period = hour >= 12 ? '오후' : '오전';\n                const adjustedHour = hour % 12 || 12;\n                return `${period} ${String(adjustedHour).padStart(2, '0')}시 ${String(minute).padStart(2, '0')}분`;\n            }\n\n            // 날짜를 HTML에 추가\n            for (const date in dates) {\n                const formattedDate = formatDate(date);\n                $('.date-list-wrapper').append(`<span class=\"date\" data-date=\"${date}\">${formattedDate}</span>`);\n            }\n\n            // 날짜 클릭 이벤트 핸들러\n            $('.date-list-wrapper').on('click', '.date', function () {\n                const selectedDate = $(this).attr('data-date');\n\n                // 모든 날짜에서 active 클래스 제거하고, 클릭한 날짜에만 추가\n                $('.date').removeClass('active');\n                $(this).addClass('active');\n\n                // 선택한 날짜에 맞는 세션을 session-list-wrapper에 추가\n                const selectedSessions = dates[selectedDate];\n                $('.session-list-wrapper').empty();\n                selectedSessions.forEach(session => {\n                    const formattedTime = formatTime(session.time);\n                    $('.session-list-wrapper').append(\n                        `<span class=\"session\" data-id=\"${session.id}\">${session.name}회차 - ${formattedTime}</span>`\n                    );\n                });\n\n                // 첫 번째 세션을 기본적으로 선택된 상태로 설정\n                // $('.session').first().click();\n\n                // 좌석 메시지 업데이트\n                updateSeatCountMessage();\n\n                // seat-text margin-right 업데이트\n                updateSeatTextMargin();\n            });\n\n            // 세션 클릭 이벤트 핸들러\n            $('.session-list-wrapper').on('click', '.session', function () {\n                // 모든 세션에서 active 클래스 제거하고, 클릭한 세션에만 추가\n                $('.session').removeClass('active');\n                $(this).addClass('active');\n   \n\n                const sessionId = $(this).attr('data-id');\n\n                $(\".reserveBtn\").attr('data-session-id', sessionId);\n                $(\".reserveBtn\").attr('data-performance-title', $(\".performance-title\").text());\n                $(\".reserveBtn\").attr('data-date', $(\".date.active\").text());\n                $(\".reserveBtn\").attr('data-time',  $(\".session.active\").text());\n\n                // 클릭한 세션의 data-id 값을 이용하여 AJAX 요청\n                $.ajax({\n                    url: `${window.SERVER_URL}/performances/${performanceId}/sessions/${sessionId}/seat-count`,\n                    type: 'GET',\n                    xhrFields: {\n                        withCredentials: true // 필요 시 추가\n                    },\n                    crossDomain: true,\n                    headers: {\n                        'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                    },\n                    beforeSend: function (xhr) {\n                        xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                    },\n                    success: function (seatCount) {\n                        console.log(seatCount);\n                        var seatCountData = seatCount.data;\n                        $(\".seat-text\").text(\"잔여 좌석 개수\");\n                        $(\".seat-count\").text(seatCountData.restSeatCount + \"/\" + seatCountData.totalSeatCount);\n                    },\n                    error: function (jqXHR) {\n                        const commentResponse = jqXHR.responseJSON;\n                        const commentResponseText = jqXHR.responseText;\n\n                        if (commentResponse != null) {\n                            alert(commentResponse.message);\n                        } else {\n                            alert(commentResponseText);\n                        }\n                    }\n                });\n\n                // seat-text margin-right 업데이트\n                updateSeatTextMargin();\n            });\n\n            // 초기 상태로 첫 번째 날짜를 선택한 상태로 설정\n            $('.date').first().click();\n        },\n        error: function (jqXHR) {\n            const commentResponse = jqXHR.responseJSON;\n            const commentResponseText = jqXHR.responseText;\n\n            if (commentResponse != null) {\n                alert(commentResponse.message);\n            } else {\n                alert(commentResponseText);\n            }\n        }\n    });\n\n\n\n\n    $('.reserveBtn').on('click', function () {\n        if ($(this).hasClass(\"disabled\") || $(this).hasClass(\"lock-btn\")) {\n            event.preventDefault();\n            event.stopPropagation();\n            return false;\n        }\n\n        updateSeatConfirmBtn();\n        const sessionId = $(this).attr('data-session-id');\n        const performanceTitle = $(this).attr('data-performance-title');\n        const dateInfo = $(this).attr('data-date');\n        const timeInfo = $(this).attr('data-time');\n        \n        \n        $.ajax({\n            url: `${window.SERVER_URL}/performances/${performanceId}/sessions/${sessionId}/seats`,\n            type: 'GET',\n            xhrFields: {\n                withCredentials: true // 필요 시 추가\n            },\n            crossDomain: true,\n            headers: {\n                'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n            },\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n            },\n            success: function (seatList) {\n                console.log(seatList);\n                $(\".container > .popup\").show();\n                $(\".container > .cover\").show()\n                $(\".performance-order-title\").text(performanceTitle)\n                $(\".performance-order-date\").text(dateInfo)\n                $(\".performance-order-time\").text(timeInfo)\n\n                const vipGridDiv = $('.seat-grid.vip');\n                const rGridDiv = $('.seat-grid.r');\n                const sGridDiv = $('.seat-grid.s');\n                const aGridDiv = $('.seat-grid.a');\n\n                const seatLists = seatList.data;\n                vipGridDiv.empty();\n                rGridDiv.empty();\n                sGridDiv.empty();\n                aGridDiv.empty();\n\n                seatLists.forEach((seat, index) => {\n                    if (seat.seatGrade == \"VIP\") {\n                        const notReserved = `\n                            <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                        `;\n\n                        const paying = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        const paymentCompleted = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        if (seat.seatStatus == \"NOT_RESERVED\") {\n                            vipGridDiv.append(notReserved)          \n                        } else {\n                            vipGridDiv.append(paying)          \n                        }\n                    }\n\n                    if (seat.seatGrade == \"R\") {\n                        const notReserved = `\n                            <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                        `;\n\n                        const paying = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        const paymentCompleted = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        if (seat.seatStatus == \"NOT_RESERVED\") {\n                            rGridDiv.append(notReserved)          \n                        } else {\n                            rGridDiv.append(paying)          \n                        }\n                    }\n\n                    if (seat.seatGrade == \"S\") {\n                        const notReserved = `\n                            <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                        `;\n\n                        const paying = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        const paymentCompleted = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        if (seat.seatStatus == \"NOT_RESERVED\") {\n                            sGridDiv.append(notReserved)          \n                        } else {\n                            sGridDiv.append(paying)          \n                        }\n                    }\n\n                    if (seat.seatGrade == \"A\") {\n                        const notReserved = `\n                            <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                        `;\n\n                        const paying = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        const paymentCompleted = `\n                            <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                        `;\n\n                        if (seat.seatStatus == \"NOT_RESERVED\") {\n                            aGridDiv.append(notReserved)          \n                        } else {\n                            aGridDiv.append(paying)          \n                        }\n                    }\n                });\n\n                const seatListWrapperDiv = $('.seat-list-wrapper');\n\n                seatListWrapperDiv.empty();\n\n\n                $('.notReserved').on('click', function() {\n\n                    const seatId = $(this).data('id');\n                    const seatGrade = $(this).data('grade');\n                    const seatIndex = $(this).data('index');\n                    const seatPrice = $(this).data('price');\n\n                    if ($(this).hasClass(\"selected\")) {\n                        $(this).removeClass('selected');\n                        $(this).attr('src', 'https://ifh.cc/g/5HSMgs.png');\n                        seatListWrapperDiv.find(`div[data-id=\"${seatId}\"]`).remove();\n\n                        selectedSeats = selectedSeats.filter(id => id !== seatId);\n                        updateSeatConfirmBtn();\n\n                    } else {\n        \n                        // 변수에 저장\n                        const seatData = {\n                            id: seatId,\n                            grade: seatGrade,\n                            index: seatIndex,\n                            price: seatPrice\n                        };\n\n                        // 클릭한 요소에 selected 클래스 추가 및 src 변경\n                        $(this).addClass('selected');\n                        $(this).attr('src', 'https://ifh.cc/g/7a0wjw.png');\n    \n                        const selectedSeatElement = `\n                            <div data-id=\"${seatId}\" data-price=\"${seatPrice}\" class=\"selected-seat\">${seatGrade + \"석 \" + seatIndex + \"번 \"}</div>\n                        `;\n                        // <div data-id=\"${seatId}\" data-price=\"${seatPrice}\" class=\"selected-seat\">${seatGrade + \"석 \" + seatIndex + \"번 \" + \" \" + seatPrice + \"원\" }<div></div>\n\n\n                        seatListWrapperDiv.append(selectedSeatElement);\n\n                        selectedSeats.push(seatId);\n                        updateSeatConfirmBtn();\n                    }\n                });\n\n\n\n                $('#seatConfirmBtn').off('click').on('click', function() {\n\n                    const requestData = {\n                        seatIdList: selectedSeats\n                    };\n                    \n                    $.ajax({\n                        url: `${window.SERVER_URL}/sessions/${sessionId}/seats/reserve`,\n                        type: 'PATCH',\n                        contentType: 'application/json',\n                        data: JSON.stringify(requestData),\n                        xhrFields: {\n                            withCredentials: true // 필요 시 추가\n                        },\n                        crossDomain: true,\n                        headers: {\n                            'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                        },\n                        beforeSend: function (xhr) {\n                            xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                        },\n                        success: function (seatSelectResponseDto) {\n\n                            console.log(seatSelectResponseDto);\n                            alert(seatSelectResponseDto.message)\n\n                            let totalPrice = 0;\n            \n                            // 모든 .selected-seat 요소를 순회하면서 data-price 값을 합산\n                            $('.selected-seat').each(function() {\n                                const price = parseInt($(this).data('price'));\n                                const currentText = $(this).text();\n                                $(this).text(`${currentText} ${price}원`);\n                                totalPrice += price;\n                            });\n\n                            // 현재 시간을 전역 변수에 저장\n                            modifiedAt = getFormattedDate();\n                            const discountedTotalPrice = (seatSelectResponseDto.data.totalPrice * (100 - seatSelectResponseDto.data.discountRate) * 0.01).toFixed(0);\n                            const formattedDiscountTotalPrice = Number(discountedTotalPrice).toLocaleString();\n\n                            $(\".container > .popup\").hide()\n                            $(\".total-price\").text(formattedDiscountTotalPrice + \"원\")\n                            if (seatSelectResponseDto.data.discountRate != 0) {\n                                $(\".seat-selected-info-wrapper > .discount-wrapper\").show()\n                                $(\".discount-rate\").text(seatSelectResponseDto.data.discountRate + \"%\")\n                            } else {\n                                $(\".seat-selected-info-wrapper > .discount-wrapper\").hide()\n                            }\n\n                            $(\".container > .popup-payment\").show()\n\n\n\n                        },\n                        error: function (jqXHR) {\n                            const commentResponse = jqXHR.responseJSON;\n                            const commentResponseText = jqXHR.responseText;\n    \n                            if (commentResponse != null) {\n                                alert(commentResponse.message);\n                            } else {\n                                alert(commentResponseText);\n                            }\n                        }\n                    });\n\n                });\n\n                $('#orderConfirmBtn').off('click').on('click', function() {\n                    console.log(modifiedAt)\n                    const requestDtoData = {\n                        seatIdList: selectedSeats,\n                        modifiedAt: modifiedAt\n                    };\n                    \n\n                    $.ajax({\n                        url: `${window.SERVER_URL}/sessions/${sessionId}/orders`,\n                        type: 'POST',\n                        contentType: 'application/json',\n                        data: JSON.stringify(requestDtoData),\n                        xhrFields: {\n                            withCredentials: true // 필요 시 추가\n                        },\n                        crossDomain: true,\n                        headers: {\n                            'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                        },\n                        beforeSend: function (xhr) {\n                            xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                        },\n                        success: function (seatSelectResponseDto) {\n                            console.log(seatSelectResponseDto);\n                            alert(seatSelectResponseDto.message)\n\n                            $(\".container > .popup\").hide()\n                            $(\".container > .popup-payment\").hide()\n                            window.location.href = '/mypage';\n\n                        },\n                        error: function (jqXHR) {\n                            const commentResponse = jqXHR.responseJSON;\n                            const commentResponseText = jqXHR.responseText;\n    \n                            if (commentResponse != null) {\n                                alert(commentResponse.message);\n                            } else {\n                                alert(commentResponseText);\n                            }\n                        }\n                    });\n                });\n\n\n\n\n            },\n            error: function (jqXHR) {\n                const commentResponse = jqXHR.responseJSON;\n                const commentResponseText = jqXHR.responseText;\n\n                if (commentResponse != null) {\n                    alert(commentResponse.message);\n                } else {\n                    alert(commentResponseText);\n                }\n            }\n        });\n        \n    });\n\n    \n\n    // 초기 메시지 설정\n    updateSeatCountMessage();\n});\n"]}