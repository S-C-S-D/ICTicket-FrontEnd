{"version":3,"sources":["../src/components/session.js"],"names":["$","document","ready","pathParts","window","location","pathname","split","performanceId","indexOf","accessToken","localStorage","getItem","selectedSeats","on","updateSeatConfirmBtn","length","console","log","addClass","css","removeClass","modifiedAt","getFormattedDate","date","Date","year","getFullYear","month","getMonth","slice","day","getDate","hours","getHours","minutes","getMinutes","concat","hide","updateSeatCountMessage","text","updateSeatTextMargin","ajax","url","SERVER_URL","type","contentType","xhrFields","withCredentials","crossDomain","headers","beforeSend","xhr","setRequestHeader","success","boardResponse","sessions","data","dates","forEach","session","push","formatDate","dateString","options","weekday","toLocaleDateString","formatTime","timeString","_timeString$split$map","map","Number","_timeString$split$map2","_slicedToArray","hour","minute","period","adjustedHour","String","padStart","formattedDate","append","selectedDate","attr","selectedSessions","empty","formattedTime","time","id","name","sessionId","seatCount","seatCountData","restSeatCount","totalSeatCount","error","jqXHR","commentResponse","responseJSON","commentResponseText","responseText","alert","message","first","click","userConfirmed","confirm","sessionStorage","setItem","href","hasClass","event","preventDefault","stopPropagation","performanceTitle","dateInfo","timeInfo","seatList","show","vipGridDiv","rGridDiv","sGridDiv","aGridDiv","seatLists","seat","index","seatGrade","notReserved","price","paying","paymentCompleted","seatStatus","seatListWrapperDiv","seatId","seatIndex","seatPrice","find","remove","filter","seatData","grade","selectedSeatElement","off","requestData","seatIdList","JSON","stringify","seatSelectResponseDto","totalPrice","each","parseInt","currentText","discountedTotalPrice","discountRate","toFixed","formattedDiscountTotalPrice","toLocaleString","errorType","requestDtoData"],"mappings":"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","file":"session.3ad098d1.js","sourceRoot":"../public","sourcesContent":["$(document).ready(function () {\n    // URL에서 performanceId 추출\n    const pathParts = window.location.pathname.split('/');\n    const performanceId = pathParts[pathParts.indexOf('performances') + 1];\n    const accessToken = localStorage.getItem('Authorization');\n    let selectedSeats = [];\n\n    $(\".close-popup-btn\").on('click', function () {\n        selectedSeats = [];\n    });\n\n    $(\".close-popup-payment-btn\").on('click', function () {\n        selectedSeats = [];\n    });\n\n    function updateSeatConfirmBtn() {\n        if (selectedSeats.length === 0) {\n            console.log(\"Test\")\n            $('#seatConfirmBtn').addClass('disabled').css('pointer-events', 'none');\n    \n        } else {\n            $('#seatConfirmBtn').removeClass('disabled').css('pointer-events', 'auto')\n        }\n    }\n    updateSeatConfirmBtn();\n\n    \n    let modifiedAt = '';\n\n    function getFormattedDate() {\n        const date = new Date();\n        const year = date.getFullYear();\n        const month = ('0' + (date.getMonth() + 1)).slice(-2);\n        const day = ('0' + date.getDate()).slice(-2);\n        const hours = ('0' + date.getHours()).slice(-2);\n        const minutes = ('0' + date.getMinutes()).slice(-2);\n\n        return `${year}-${month}-${day}-${hours}:${minutes}`;\n    }\n\n    $(\".container > .cover\").on('click', function () {\n        $(\".container > .cover\").hide();\n        $(\".popup\").hide();\n        $(\".popup-payment\").hide();\n        selectedSeats = [];\n    });\n\n    // 초기 상태 메시지\n    function updateSeatCountMessage() {\n        if (!$('.date.active').length || !$('.session.active').length) {\n            $(\".seat-text\").text(\"날짜와 시간을 선택해 주세요\");\n            $(\".seat-count\").text(\"\");\n            $(\".reserveBtn\").addClass(\"disabled\")\n        }\n    }\n\n    // 두 요소가 모두 활성화되었는지 확인하여 seat-text의 margin-right를 업데이트하는 함수\n    function updateSeatTextMargin() {\n        if ($('.date.active').length && $('.session.active').length) {\n            $(\".seat-text\").css(\"margin-right\", \"50px\");\n            $(\".reserveBtn\").removeClass(\"disabled\")\n        } else {\n            $(\".seat-text\").css(\"margin-right\", \"\");\n        }\n    }\n\n    // [세션 조회]\n    $.ajax({\n        url: `${window.SERVER_URL}/performances/${performanceId}/sessions`,\n        type: 'GET',\n        contentType: 'application/json',\n        xhrFields: {\n            withCredentials: true // 필요 시 추가\n        },\n        crossDomain: true,\n        headers: {\n            'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n        },\n        beforeSend: function (xhr) {\n            xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n        },\n        success: function (boardResponse) {\n            console.log(boardResponse);\n\n            const sessions = boardResponse.data;\n            const dates = {};\n\n            // 날짜별로 세션을 그룹화\n            sessions.forEach(session => {\n                if (!dates[session.date]) {\n                    dates[session.date] = [];\n                }\n                dates[session.date].push(session);\n            });\n\n            // 날짜를 \"2024년 08월 07일 수요일\" 형식으로 변환하는 함수\n            function formatDate(dateString) {\n                const date = new Date(dateString);\n                const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };\n                return date.toLocaleDateString('ko-KR', options);\n            }\n\n            // 시간을 \"오후 12시 00분\" 형식으로 변환하는 함수\n            function formatTime(timeString) {\n                const [hour, minute] = timeString.split(':').map(Number);\n                const period = hour >= 12 ? '오후' : '오전';\n                const adjustedHour = hour % 12 || 12;\n                return `${period} ${String(adjustedHour).padStart(2, '0')}시 ${String(minute).padStart(2, '0')}분`;\n            }\n\n            // 날짜를 HTML에 추가\n            for (const date in dates) {\n                const formattedDate = formatDate(date);\n                $('.date-list-wrapper').append(`<span class=\"date\" data-date=\"${date}\">${formattedDate}</span>`);\n            }\n\n            // 날짜 클릭 이벤트 핸들러\n            $('.date-list-wrapper').on('click', '.date', function () {\n                const selectedDate = $(this).attr('data-date');\n\n                // 모든 날짜에서 active 클래스 제거하고, 클릭한 날짜에만 추가\n                $('.date').removeClass('active');\n                $(this).addClass('active');\n\n                // 선택한 날짜에 맞는 세션을 session-list-wrapper에 추가\n                const selectedSessions = dates[selectedDate];\n                $('.session-list-wrapper').empty();\n                selectedSessions.forEach(session => {\n                    const formattedTime = formatTime(session.time);\n                    $('.session-list-wrapper').append(\n                        `<span class=\"session\" data-id=\"${session.id}\">${session.name}회차 - ${formattedTime}</span>`\n                    );\n                });\n\n                // 첫 번째 세션을 기본적으로 선택된 상태로 설정\n                // $('.session').first().click();\n\n                // 좌석 메시지 업데이트\n                updateSeatCountMessage();\n\n                // seat-text margin-right 업데이트\n                updateSeatTextMargin();\n            });\n\n            // 세션 클릭 이벤트 핸들러\n            $('.session-list-wrapper').on('click', '.session', function () {\n                // 모든 세션에서 active 클래스 제거하고, 클릭한 세션에만 추가\n                $('.session').removeClass('active');\n                $(this).addClass('active');\n   \n\n                const sessionId = $(this).attr('data-id');\n\n                $(\".reserveBtn\").attr('data-session-id', sessionId);\n                $(\".reserveBtn\").attr('data-performance-title', $(\".performance-title\").text());\n                $(\".reserveBtn\").attr('data-date', $(\".date.active\").text());\n                $(\".reserveBtn\").attr('data-time',  $(\".session.active\").text());\n\n                // 클릭한 세션의 data-id 값을 이용하여 AJAX 요청\n                $.ajax({\n                    url: `${window.SERVER_URL}/performances/${performanceId}/sessions/${sessionId}/seat-count`,\n                    type: 'GET',\n                    xhrFields: {\n                        withCredentials: true // 필요 시 추가\n                    },\n                    crossDomain: true,\n                    headers: {\n                        'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                    },\n                    beforeSend: function (xhr) {\n                        xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                    },\n                    success: function (seatCount) {\n                        console.log(seatCount);\n                        var seatCountData = seatCount.data;\n                        $(\".seat-text\").text(\"잔여 좌석 개수\");\n                        $(\".seat-count\").text(seatCountData.restSeatCount + \"/\" + seatCountData.totalSeatCount);\n                    },\n                    error: function (jqXHR) {\n                        const commentResponse = jqXHR.responseJSON;\n                        const commentResponseText = jqXHR.responseText;\n\n                        if (commentResponse != null) {\n                            alert(commentResponse.message);\n                        } else {\n                            alert(commentResponseText);\n                        }\n                    }\n                });\n\n                // seat-text margin-right 업데이트\n                updateSeatTextMargin();\n            });\n\n            // 초기 상태로 첫 번째 날짜를 선택한 상태로 설정\n            $('.date').first().click();\n        },\n        error: function (jqXHR) {\n            const commentResponse = jqXHR.responseJSON;\n            const commentResponseText = jqXHR.responseText;\n\n            if (commentResponse != null) {\n                alert(commentResponse.message);\n            } else {\n                alert(commentResponseText);\n            }\n        }\n    });\n\n\n\n\n    $('.reserveBtn').on('click', function () {\n\n        if (!accessToken) {\n            const userConfirmed = confirm('로그인이 필요한 서비스입니다. 로그인 페이지로 이동하시겠습니까?');\n            if (userConfirmed) {\n                // 현재 페이지의 URL을 세션 스토리지에 저장\n                sessionStorage.setItem('redirectUrl', window.location.href);\n                window.location.href = '/login'; // 확인 버튼 클릭 시 로그인 페이지로 이동\n            }\n        } else {\n\n         \n            if ($(this).hasClass(\"disabled\") || $(this).hasClass(\"lock-btn\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n    \n            updateSeatConfirmBtn();\n            const sessionId = $(this).attr('data-session-id');\n            const performanceTitle = $(this).attr('data-performance-title');\n            const dateInfo = $(this).attr('data-date');\n            const timeInfo = $(this).attr('data-time');\n            \n            \n            $.ajax({\n                url: `${window.SERVER_URL}/performances/${performanceId}/sessions/${sessionId}/seats`,\n                type: 'GET',\n                xhrFields: {\n                    withCredentials: true // 필요 시 추가\n                },\n                crossDomain: true,\n                headers: {\n                    'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                },\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                },\n                success: function (seatList) {\n                    console.log(seatList);\n                    $(\".container > .popup\").show();\n                    $(\".container > .cover\").show()\n                    $(\".performance-order-title\").text(performanceTitle)\n                    $(\".performance-order-date\").text(dateInfo)\n                    $(\".performance-order-time\").text(timeInfo)\n    \n                    const vipGridDiv = $('.seat-grid.vip');\n                    const rGridDiv = $('.seat-grid.r');\n                    const sGridDiv = $('.seat-grid.s');\n                    const aGridDiv = $('.seat-grid.a');\n    \n                    const seatLists = seatList.data;\n                    vipGridDiv.empty();\n                    rGridDiv.empty();\n                    sGridDiv.empty();\n                    aGridDiv.empty();\n    \n                    seatLists.forEach((seat, index) => {\n                        if (seat.seatGrade == \"VIP\") {\n                            const notReserved = `\n                                <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                            `;\n    \n                            const paying = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            const paymentCompleted = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            if (seat.seatStatus == \"NOT_RESERVED\") {\n                                vipGridDiv.append(notReserved)          \n                            } else {\n                                vipGridDiv.append(paying)          \n                            }\n                        }\n    \n                        if (seat.seatGrade == \"R\") {\n                            const notReserved = `\n                                <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                            `;\n    \n                            const paying = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            const paymentCompleted = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            if (seat.seatStatus == \"NOT_RESERVED\") {\n                                rGridDiv.append(notReserved)          \n                            } else {\n                                rGridDiv.append(paying)          \n                            }\n                        }\n    \n                        if (seat.seatGrade == \"S\") {\n                            const notReserved = `\n                                <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                            `;\n    \n                            const paying = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            const paymentCompleted = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            if (seat.seatStatus == \"NOT_RESERVED\") {\n                                sGridDiv.append(notReserved)          \n                            } else {\n                                sGridDiv.append(paying)          \n                            }\n                        }\n    \n                        if (seat.seatGrade == \"A\") {\n                            const notReserved = `\n                                <img class=\"notReserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/5HSMgs.png\">\n                            `;\n    \n                            const paying = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            const paymentCompleted = `\n                                <img class=\"reserved\" data-id=\"${seat.id}\" data-grade=\"${seat.seatGrade}\" data-index=\"${index+1}\" data-price=\"${seat.price}\" src=\"https://ifh.cc/g/QqyHzC.png\">\n                            `;\n    \n                            if (seat.seatStatus == \"NOT_RESERVED\") {\n                                aGridDiv.append(notReserved)          \n                            } else {\n                                aGridDiv.append(paying)          \n                            }\n                        }\n                    });\n    \n                    const seatListWrapperDiv = $('.seat-list-wrapper');\n    \n                    seatListWrapperDiv.empty();\n    \n    \n                    $('.notReserved').on('click', function() {\n                        const seatId = $(this).data('id');\n                        const seatGrade = $(this).data('grade');\n                        const seatIndex = $(this).data('index');\n                        const seatPrice = $(this).data('price');\n    \n                        if ($(this).hasClass(\"selected\") ) {\n                            $(this).removeClass('selected');\n                            $(this).attr('src', 'https://ifh.cc/g/5HSMgs.png');\n                            seatListWrapperDiv.find(`div[data-id=\"${seatId}\"]`).remove();\n    \n                            selectedSeats = selectedSeats.filter(id => id !== seatId);\n                            updateSeatConfirmBtn();\n    \n                        } else {\n                               \n                            if (selectedSeats.length >= 4) {\n                                alert(\"최대 4개의 좌석까지 선택 가능합니다.\")\n                            } else {\n                                // 변수에 저장\n                                const seatData = {\n                                    id: seatId,\n                                    grade: seatGrade,\n                                    index: seatIndex,\n                                    price: seatPrice\n                                };\n        \n                                // 클릭한 요소에 selected 클래스 추가 및 src 변경\n                                $(this).addClass('selected');\n                                $(this).attr('src', 'https://ifh.cc/g/7a0wjw.png');\n            \n                                const selectedSeatElement = `\n                                    <div data-id=\"${seatId}\" data-price=\"${seatPrice}\" class=\"selected-seat\">${seatGrade + \"석 \" + seatIndex + \"번 \"}</div>\n                                `;\n                                // <div data-id=\"${seatId}\" data-price=\"${seatPrice}\" class=\"selected-seat\">${seatGrade + \"석 \" + seatIndex + \"번 \" + \" \" + seatPrice + \"원\" }<div></div>\n        \n        \n                                seatListWrapperDiv.append(selectedSeatElement);\n        \n                                selectedSeats.push(seatId);\n                                updateSeatConfirmBtn();\n                            }\n    \n                        }\n                        \n\n\n                    });\n    \n    \n    \n                    $('#seatConfirmBtn').off('click').on('click', function() {\n    \n                        const requestData = {\n                            seatIdList: selectedSeats\n                        };\n                        \n                        $.ajax({\n                            url: `${window.SERVER_URL}/sessions/${sessionId}/seats/reserve`,\n                            type: 'PATCH',\n                            contentType: 'application/json',\n                            data: JSON.stringify(requestData),\n                            xhrFields: {\n                                withCredentials: true // 필요 시 추가\n                            },\n                            crossDomain: true,\n                            headers: {\n                                'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                            },\n                            beforeSend: function (xhr) {\n                                xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                            },\n                            success: function (seatSelectResponseDto) {\n    \n                                console.log(seatSelectResponseDto);\n                                alert(seatSelectResponseDto.message)\n    \n                                let totalPrice = 0;\n                \n                                // 모든 .selected-seat 요소를 순회하면서 data-price 값을 합산\n                                $('.selected-seat').each(function() {\n                                    const price = parseInt($(this).data('price'));\n                                    const currentText = $(this).text();\n                                    $(this).text(`${currentText} ${price}원`);\n                                    totalPrice += price;\n                                });\n    \n                                // 현재 시간을 전역 변수에 저장\n                                modifiedAt = getFormattedDate();\n                                const discountedTotalPrice = (seatSelectResponseDto.data.totalPrice * (100 - seatSelectResponseDto.data.discountRate) * 0.01).toFixed(0);\n                                const formattedDiscountTotalPrice = Number(discountedTotalPrice).toLocaleString();\n    \n                                $(\".container > .popup\").hide()\n                                $(\".total-price\").text(formattedDiscountTotalPrice + \"원\")\n                                if (seatSelectResponseDto.data.discountRate != 0) {\n                                    $(\".seat-selected-info-wrapper > .discount-wrapper\").show()\n                                    $(\".discount-rate\").text(seatSelectResponseDto.data.discountRate + \"%\")\n                                } else {\n                                    $(\".seat-selected-info-wrapper > .discount-wrapper\").hide()\n                                }\n    \n                                $(\".container > .popup-payment\").show()\n    \n    \n    \n                            },\n                            error: function (jqXHR) {\n                                const commentResponse = jqXHR.responseJSON;\n                                const commentResponseText = jqXHR.responseText;\n        \n                                if (commentResponse != null) {\n                                    if(commentResponse.errorType == \"REQUIRES_LOGIN\") {\n                                        alert(commentResponse.message);\n                                        window.location.href = '/login';\n                                    } else {\n                                        alert(commentResponse.message)\n                                    }\n                                } else {\n                                    alert(commentResponseText);\n                                }\n                            }\n                        });\n    \n                    });\n    \n                    $('#orderConfirmBtn').off('click').on('click', function() {\n                        console.log(modifiedAt)\n                        const requestDtoData = {\n                            seatIdList: selectedSeats,\n                            modifiedAt: modifiedAt\n                        };\n                        \n    \n                        $.ajax({\n                            url: `${window.SERVER_URL}/sessions/${sessionId}/orders`,\n                            type: 'POST',\n                            contentType: 'application/json',\n                            data: JSON.stringify(requestDtoData),\n                            xhrFields: {\n                                withCredentials: true // 필요 시 추가\n                            },\n                            crossDomain: true,\n                            headers: {\n                                'Authorization': 'Bearer ' + accessToken // 헤더명 수정\n                            },\n                            beforeSend: function (xhr) {\n                                xhr.setRequestHeader('Authorization', accessToken); // 헤더명 수정\n                            },\n                            success: function (seatSelectResponseDto) {\n                                console.log(seatSelectResponseDto);\n                                alert(seatSelectResponseDto.message)\n    \n                                $(\".container > .popup\").hide()\n                                $(\".container > .popup-payment\").hide()\n                                window.location.href = '/mypage';\n    \n                            },\n                            error: function (jqXHR) {\n                                const commentResponse = jqXHR.responseJSON;\n                                const commentResponseText = jqXHR.responseText;\n        \n                                if (commentResponse != null) {\n                                    alert(commentResponse.message);\n                                } else {\n                                    alert(commentResponseText);\n                                }\n                            }\n                        });\n                    });\n    \n    \n    \n    \n                },\n                error: function (jqXHR) {\n                    const commentResponse = jqXHR.responseJSON;\n                    const commentResponseText = jqXHR.responseText;\n    \n                    if (commentResponse != null) {\n                        alert(commentResponse.message);\n                    } else {\n                        alert(commentResponseText);\n                    }\n                }\n            });\n            \n\n        }\n    });\n\n    \n\n    // 초기 메시지 설정\n    updateSeatCountMessage();\n});\n"]}